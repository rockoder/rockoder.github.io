<svg viewBox="0 0 900 420" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="screenGlow" x1="50%" y1="0%" x2="50%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.12"/>
      <stop offset="100%" style="stop-color:#1e3a5f;stop-opacity:0.03"/>
    </linearGradient>
    <filter id="blur1">
      <feGaussianBlur stdDeviation="1.2"/>
    </filter>
    <filter id="blur2">
      <feGaussianBlur stdDeviation="2.2"/>
    </filter>
    <filter id="blur3">
      <feGaussianBlur stdDeviation="3.8"/>
    </filter>
    <clipPath id="screenClip">
      <rect x="0" y="0" width="900" height="420" rx="6"/>
    </clipPath>
  </defs>

  <!-- Screen background -->
  <rect width="900" height="420" rx="6" fill="#0f0f0f"/>
  <rect width="900" height="420" rx="6" fill="url(#screenGlow)"/>

  <!-- Python code - async connection pool with race condition handling -->
  <g clip-path="url(#screenClip)">
    <!-- Clear code at top -->
    <text x="24" y="35" fill="#6b7280" font-family="ui-monospace, monospace" font-size="14"># connection_pool.py</text>
    <text x="24" y="62" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">class</text>
    <text x="75" y="62" fill="#4ec9b0" font-family="ui-monospace, monospace" font-size="14">AsyncConnectionPool</text>
    <text x="260" y="62" fill="#e5e7eb" font-family="ui-monospace, monospace" font-size="14">:</text>

    <text x="48" y="89" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">def</text>
    <text x="85" y="89" fill="#dcdcaa" font-family="ui-monospace, monospace" font-size="14">__init__</text>
    <text x="160" y="89" fill="#e5e7eb" font-family="ui-monospace, monospace" font-size="14">(self, max_size: int = 10):</text>

    <!-- Slightly blurred -->
    <g filter="url(#blur1)">
      <text x="72" y="116" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._semaphore = asyncio.Semaphore(max_size)</text>
      <text x="72" y="143" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._lock = asyncio.Lock()</text>
      <text x="72" y="170" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._connections: dict[int, Connection] = {}</text>
    </g>

    <!-- More blurred - the complex concurrent logic -->
    <g filter="url(#blur2)">
      <text x="48" y="204" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">async def</text>
      <text x="130" y="204" fill="#dcdcaa" font-family="ui-monospace, monospace" font-size="14">acquire</text>
      <text x="195" y="204" fill="#e5e7eb" font-family="ui-monospace, monospace" font-size="14">(self) -> Connection:</text>
      <text x="72" y="231" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">async with</text>
      <text x="165" y="231" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._semaphore:</text>
      <text x="96" y="258" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">async with</text>
      <text x="190" y="258" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._lock:</text>
    </g>

    <!-- Most blurred - critical section, race condition prone -->
    <g filter="url(#blur3)">
      <text x="120" y="285" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">conn_id = id(asyncio.current_task())</text>
      <text x="120" y="312" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">if</text>
      <text x="145" y="312" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">conn_id</text>
      <text x="205" y="312" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">not in</text>
      <text x="275" y="312" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._connections:</text>
      <text x="144" y="339" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._connections[conn_id] =</text>
      <text x="380" y="339" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">await</text>
      <text x="430" y="339" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._create_conn()</text>
      <text x="120" y="366" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">return</text>
      <text x="175" y="366" fill="#9cdcfe" font-family="ui-monospace, monospace" font-size="14">self._connections[conn_id]</text>
    </g>

    <!-- Back to slightly clearer at bottom -->
    <g filter="url(#blur1)">
      <text x="48" y="400" fill="#c586c0" font-family="ui-monospace, monospace" font-size="14">async def</text>
      <text x="130" y="400" fill="#dcdcaa" font-family="ui-monospace, monospace" font-size="14">release</text>
      <text x="195" y="400" fill="#e5e7eb" font-family="ui-monospace, monospace" font-size="14">(self, conn: Connection) -> None:</text>
    </g>
  </g>

  <!-- Cursor blinking - positioned in the blur zone -->
  <rect x="175" y="295" width="2" height="18" fill="#3b82f6" opacity="0.8">
    <animate attributeName="opacity" values="0.8;0;0.8" dur="1.2s" repeatCount="indefinite"/>
  </rect>

  <!-- Subtle reflection hint -->
  <ellipse cx="450" cy="280" rx="180" ry="120" fill="#1e293b" opacity="0.03"/>
</svg>